# 【要件定義書】中トロドン Webアプリケーション

# 1. 改訂履歴
| **版数** | **改訂日** | **改訂内容** | **作成者** |
|:-:|:-:|:-:|:-:|
| 1.5 | 2025/07/18 | ランキングシステム、選択式回答モード、時間計測最適化、MSW統合、セッション管理機能追加 | Claude |
| 1.4 | 2025/07/16 | チャレンジモード実装、ランクシステム、テスト最適化 | Claude |
| 1.3 | 2025/07/15 | モーダル機能実装、デフォルト再生時間設定機能追加 | Claude |
| 1.2 | 2025/07/15 | 出題範囲設定のモーダル化 | Claude |
| 1.1 | 2025/07/14 | 楽曲再生ロジック変更（durationを任意項目化） | Gemini |
| 1.0 | 2025/07/14 | 初版作成 | Gemini |

# 2. はじめに
### 2.1. 本書の目的
本書は、Webアプリケーション「中トロドン」の開発にあたり、その仕様、機能、および非機能要件を明確に定義することを目的とします。本書は、開発チーム、デザイナー、およびプロジェクト関係者間の共通認識を形成するための基礎資料となります。

### 2.2. プロダクト概要
「中トロドン」は、楽曲の中盤（サビやBメロなど）を聴いて曲名を当てる、新感覚の音楽クイズWebアプリケーションです。ユーザーは出題範囲を好きなアーティストのアルバム単位でカスタマイズでき、「のんびりモード」と「タイムアタック」の2つのモードでより深く音楽を楽しむ体験を提供します。

### 2.3. 開発の背景と目的
従来のイントロクイズとは一線を画し、楽曲の最も特徴的な部分から出題することで、アーティストのファンはより深く知識を試し、ライトな音楽ファンは新たな曲と出会うきっかけを得ることができます。友人や家族と手軽に楽しめるエンターテイメントを提供し、音楽を通じたコミュニケーションの活性化を目指します。

# 3. システム構成
### 3.1. 技術スタック
本アプリケーションは、以下の技術スタックで開発を行います。
| **カテゴリ** | **技術** | **バージョン/備考** |
|:-:|:-:|:-:|
| フレームワーク | Next.js | v15.3.5 (App Router) |
| 言語 | TypeScript | v5.5.0 |
| スタイリング | Tailwind CSS | v3.4.0 |
| データベース | PostgreSQL | Prisma ORM使用 |
| テスティング | Jest | v29.7.0 |
| Linter/Formatter | Biome | v1.8.0 |
| パッケージ管理 | pnpm | v8.0.0以降 |
| 開発環境API | MSW | Mock Service Worker |

### 3.2. データ管理
* **楽曲データ:** アプリケーション内で使用する楽曲情報は、静的なJSONファイルで管理します。
* **データ構造:** 楽曲データは、アーティスト、アルバム、楽曲の階層構造で定義します。
* **ランキングデータ:** チャレンジモードのスコアはデータベース（Prisma + PostgreSQL）で管理します。
* **セッションデータ:** ユーザーのプレイ状況は sessionStorage で管理し、重複登録を防止します。

songs.json の構造例:
```json
{
  "artists": [
    {
      "id": "artist001",
      "name": "アーティストA",
      "albums": [
        {
          "id": "album001",
          "name": "アルバムX",
          "jacketUrl": "https://example.com/jacketX.jpg",
          "tracks": [
            {
              "id": "track001",
              "title": "曲1",
              "youtubeUrl": "https://www.youtube.com/watch?v=xxxxxx"
            },
            {
              "id": "track002",
              "title": "短い曲2",
              "youtubeUrl": "https://www.youtube.com/watch?v=yyyyyy",
              "duration": 120,
              "midpointStart": 55
            }
          ]
        }
      ]
    }
  ]
}
```
* **duration (任意):** 曲の総再生時間（秒）。短い曲や特に長い曲など、再生開始位置の計算で標準と異なる考慮が必要な場合に**任意で設定**します。
* **midpointStart (任意):** 中盤再生の推奨開始時間（秒）。計算ロジックよりも優先して再生開始位置を固定したい場合に利用します。

# 4. 機能要件
### 4.1. 画面一覧・遷移図
```mermaid
graph TD
    A[トップ画面] -->|「のんびりモード」選択| B{モード選択状態}
    A -->|「タイムアタック」選択| C{チャレンジモード選択状態}
    B -->|「クイズ開始」クリック| D(のんびりモード画面)
    C -->|「タイムアタック開始」クリック| E(チャレンジモード画面)
    A -->|「出題範囲を設定」クリック| F{出題範囲設定モーダル}
    A -->|「ランキング」クリック| J(ランキング画面)
    F -->|「設定を閉じる」クリック| A
    D -->|「設定」クリック| G{出題範囲設定モーダル}
    G -->|「設定を閉じる」クリック| D
    D -->|「次へ」クリック| D
    D -->|全問終了後「クイズ終了」クリック| A
    E -->|「設定」クリック| H{出題範囲設定モーダル}
    H -->|「設定を閉じる」クリック| E
    E -->|正解/答え表示| E
    E -->|全問終了後| I(チャレンジ結果画面)
    I -->|「ランキング登録」クリック| K{ランキング登録処理}
    I -->|「もう一度チャレンジ」クリック| A
    I -->|「トップに戻る」クリック| A
    J -->|「戻る」クリック| A
    J -->|詳細クリック| L{ランキング詳細モーダル}
    L -->|「閉じる」クリック| J
    K -->|登録完了| I
```

### 4.2. 画面別要件定義
**4.2.1. トップ画面 (** / **)**
ユーザーが最初に訪れる画面。ゲームモードの選択と、出題範囲・再生時間の設定を行います。

**UIコンポーネントと仕様:**
| **No.** | **UI要素** | **種別** | **説明** |
|:-:|:-:|:-:|:-:|
| 1 | アプリケーションロゴ | 画像/テキスト | 「中トロドン」のタイトルロゴと説明文を表示する。 |
| 2 | モード選択エリア | コンテナ | ゲームモードの選択状況を表示するエリア。 |
| 3 | のんびりモードボタン | ボタン | 「のんびりモード」ボタン。クリックで通常のクイズモードを選択する。 |
| 4 | タイムアタックボタン | ボタン | 「タイムアタック」ボタン。クリックでチャレンジモードを選択する。 |
| 5 | 出題範囲設定エリア | コンテナ | 出題範囲の設定状況を表示するエリア。 |
| 6 | 出題範囲設定ボタン | ボタン | 「出題範囲を設定」ボタン。クリックで出題範囲設定モーダル(No.7)を開く。 |
| 7 | 出題範囲設定モーダル | モーダル | アーティスト・アルバム選択と再生時間設定を行うモーダルウィンドウ。 |
| 8 | クイズ開始ボタン | ボタン | 「クイズ開始」ボタン。のんびりモード選択時に活性化する。 |
| 9 | タイムアタック開始ボタン | ボタン | 「タイムアタック開始」ボタン。タイムアタック選択時に活性化する。 |
| 10 | ランキングボタン | ボタン | 「ランキング」ボタン。クリックでランキング画面へ遷移する。 |

**4.2.2. のんびりモード画面 (** /quiz **)**
のんびりモードをプレイするメイン画面です。

**UIコンポーネントと仕様:**
| **No.** | **UI要素** | **種別** | **説明** |
|:-:|:-:|:-:|:-:|
| 1 | 問題番号 | テキスト | 「Q. 1」「Q. 2」のように現在の問題番号を表示する。 |
| 2 | YouTube埋め込み | iframe | 楽曲再生用のYouTube iframe。**ユーザーには見えないように画面外に配置**し、音声のみを再生する。 |
| 3 | 再生ボタン | ボタン | アイコン（▶/❚❚）で再生/停止状態を示す。クリックで楽曲の中盤を指定時間再生/停止する。 |
| 4 | 再生時間選択 | プルダウン | 再生時間を「1秒」「1.5秒」「2秒」「3秒」「5秒」から選択できる。 |
| 5 | 答えを表示ボタン | ボタン | クリックすると、解答エリア(No.6)を表示する。一度クリックすると非活性化する。 |
| 6 | 解答エリア | コンテナ | **初期状態では非表示。**「答えを表示」ボタンクリックで表示される。以下の要素を含む。<br>・アルバムジャケット画像 (jacketUrl)<br>・曲名 (title)<br>・アーティスト名 (name)<br>・アルバム名 (name) |
| 7 | 次へボタン | ボタン | **初期状態では非活性。**「答えを表示」ボタンクリック後に活性化する。クリックすると次の問題へ進む。最後の問題では「クイズ終了」と表示される。 |
| 8 | 出題範囲設定ボタン | ボタン | 歯車アイコンのボタン。クリックすると出題範囲設定モーダル(No.9)を開く。 |
| 9 | 出題範囲設定モーダル | モーダル | トップ画面と同様のアルバム選択・再生時間設定機能を提供するモーダルウィンドウ。 |

**4.2.3. チャレンジモード画面 (** /challenge **)**
チャレンジモード（タイムアタック）をプレイするメイン画面です。

**UIコンポーネントと仕様:**
| **No.** | **UI要素** | **種別** | **説明** |
|:-:|:-:|:-:|:-:|
| 1 | ヘッダー | コンテナ | 「中トロドン タイムアタック」のタイトルと設定ボタンを表示する。 |
| 2 | 現在のスコア | テキスト | リアルタイムで更新される現在のスコアを表示する。 |
| 3 | プログレスバー | プログレス | 「Q.1 / 10」形式の進捗表示と視覚的なプログレスバー。 |
| 4 | YouTube埋め込み | iframe | 楽曲再生用のYouTube iframe。画面外に配置し、音声のみを再生する。 |
| 5 | 再生ボタン | ボタン | アイコン（▶/❚❚）で再生/停止状態を示す。クリックで楽曲の中盤を指定時間再生/停止する。 |
| 6 | 再生時間選択 | プルダウン | 再生時間を「1秒」「1.5秒」「2秒」「3秒」「5秒」から選択できる。 |
| 7 | 回答方式選択 | タブ | 「テキスト入力」と「選択式」の回答方式を選択するタブ。 |
| 8 | 答え入力欄 | テキスト入力 | 楽曲名を入力するためのテキストフィールド。テキスト入力モード時に表示。 |
| 9 | 楽曲選択ボタン | ボタン | 「楽曲を選択して回答」ボタン。選択式モード時に表示。 |
| 10 | 回答ボタン | ボタン | 「回答する」ボタン。クリックで答えを提出し、正誤判定を行う。 |
| 11 | 答えを表示ボタン | ボタン | 「答えを表示 (-1000pt)」ボタン。クリックで答えを表示し、-1000ptのペナルティを適用する。 |
| 12 | 経過時間表示 | テキスト | 問題開始からの経過時間を表示。正解時または答え表示時に停止。 |
| 13 | 選択式回答モーダル | モーダル | 選択式回答モード時に表示される楽曲選択モーダル。アルバム一覧と楽曲一覧を表示。 |
| 14 | 解答エリア | コンテナ | 正解時または答え表示時に表示される。アルバムジャケット、曲名、アーティスト名、アルバム名を含む。 |
| 15 | 次へボタン | ボタン | 正解時または答え表示時に活性化する。最後の問題では「結果を見る」と表示される。 |
| 16 | 出題範囲設定ボタン | ボタン | 歯車アイコンのボタン。クリックすると出題範囲設定モーダル(No.17)を開く。 |
| 17 | 出題範囲設定モーダル | モーダル | トップ画面と同様のアルバム選択・再生時間設定機能を提供するモーダルウィンドウ。 |

**4.2.4. チャレンジ結果画面 (** /challenge/result **)**
チャレンジモード完了後のスコア表示画面です。

**UIコンポーネントと仕様:**
| **No.** | **UI要素** | **種別** | **説明** |
|:-:|:-:|:-:|:-:|
| 1 | ヘッダー | コンテナ | 「中トロドン タイムアタック結果」のタイトルを表示する。 |
| 2 | 最終スコア | テキスト | アニメーション付きで最終スコアを表示する。 |
| 3 | ランク表示 | バッジ | SS/S/A/B/C/D/Fランクを色付きバッジで表示する。 |
| 4 | メッセージ | テキスト | ランクに応じた評価メッセージを表示する。 |
| 5 | アクションボタン | ボタン | 「もう一度チャレンジ」「トップに戻る」ボタンを表示する。 |
| 6 | 詳細スコア表示 | テーブル | 問題別の詳細スコア（基本点、時間ボーナス、再生時間ボーナス、答え表示ペナルティ）を表示する。 |
| 7 | ランキング登録エリア | フォーム | ユーザー名入力フィールドと「ランキング登録」ボタンを表示する。 |
| 8 | 登録済み表示 | テキスト | ランキング登録済みの場合は「登録済み」と表示し、フォームを非表示にする。 |

**4.2.5. ランキング画面 (** /ranking **)**
チャレンジモードのランキング表示画面です。

**UIコンポーネントと仕様:**
| **No.** | **UI要素** | **種別** | **説明** |
|:-:|:-:|:-:|:-:|
| 1 | ヘッダー | コンテナ | 「ランキング」のタイトルを表示する。 |
| 2 | ランキング一覧 | テーブル | 上位100位までのランキングを表示する。順位、ランク、ユーザー名、スコア、登録日時を含む。 |
| 3 | ランキング詳細ボタン | ボタン | 各ランキングエントリをクリックすると詳細モーダルを開く。 |
| 4 | ランキング詳細モーダル | モーダル | 選択されたユーザーの詳細スコア情報を表示するモーダルウィンドウ。 |
| 5 | 戻るボタン | ボタン | 「戻る」ボタン。クリックでトップ画面に戻る。 |
| 6 | チャレンジモードボタン | ボタン | 「チャレンジモードをプレイ」ボタン。クリックでチャレンジモードに遷移する。 |

**4.2.6. 出題範囲設定モーダル**
トップ画面・各ゲームモード画面から呼び出される共通のモーダルです。

**UIコンポーネントと仕様:**
| **No.** | **UI要素** | **種別** | **説明** |
|:-:|:-:|:-:|:-:|
| 1 | アーティスト選択 | プルダウン | songs.json からアーティスト一覧を動的に生成し、表示する。 |
| 2 | アルバム選択リスト | チェックボックスリスト | 選択されたアーティストのアルバム一覧をジャケット画像と共に表示する。各アルバムにチェックボックスを設け、出題対象を選択可能にする。 |
| 3 | 一括選択ボタン | ボタン | 「すべて選択」「すべて解除」の2つのボタンを配置し、表示されているアルバムを一括で選択/解除できる。 |
| 4 | 再生時間設定 | プルダウン | デフォルト再生時間を「未選択」「1秒」「1.5秒」「2秒」「3秒」「5秒」から選択できる。 |
| 5 | 設定を閉じるボタン | ボタン | モーダルを閉じるボタン。設定内容を保存する。 |

### 4.3. 共通機能要件
**4.3.1. 楽曲再生ロジック**
* **再生箇所の決定:**
  * **原則 (Default Rule):** songs.jsonの楽曲データにdurationの指定がない場合、多くの楽曲が平均4〜5分であることを想定し、**90秒から150秒の間**のランダムな整数秒を開始位置とします。
  * **例外 (Exception Rule):** 楽曲データにduration (曲の総再生時間) が指定されている場合、その曲の中盤部分を再生します。具体的な開始時間は、duration * 0.4 から duration * 0.6 の間のランダムな整数秒とします。この仕組みにより、極端に再生時間が短い、または長い楽曲にも柔軟に対応できます。
  * **優先事項 (Priority):** 楽曲データにmidpointStartが指定されている場合は、上記の計算ロジックよりも優先してその値を再生開始時間として使用します。

**4.3.2. 再生時間デフォルト設定機能**
* **デフォルト再生時間の設定:**
  * 出題範囲設定モーダルでデフォルト再生時間を設定可能。
  * 設定された場合：各問題でその秒数にリセットされる。
  * 未設定の場合：前の問題の再生時間設定が引き継がれる。
* **URLパラメータ連携:**
  * トップ画面からクイズ画面への遷移時に `defaultDuration` パラメータで設定を引き継ぎ。
  * 設定の永続化により、画面遷移後も設定が保持される。

**4.3.3. YouTube再生制御**
* YouTube IFrame Player API を利用して、再生、停止、シークを制御する。
* loadVideoById メソッドに startSeconds パラメータを指定して、決定された開始時間から再生を開始する。
* setTimeout を使用して、指定秒数後に pauseVideo を呼び出し、再生を停止する。
* プレイヤーは画面外に配置し、音声のみを再生する。

**4.3.4. 出題範囲設定機能**
* **アルバム選択:**
  * アーティスト単位でアルバムを選択可能。
  * 一括選択・解除機能を提供。
  * 選択されたアルバムの楽曲のみからクイズ問題を生成。
* **URLパラメータ連携:**
  * 選択されたアルバムを `albums` パラメータで管理。
  * 全アルバム選択時はパラメータを省略し、全楽曲から出題。

**4.3.5. チャレンジモード機能**
* **スコアリングシステム:**
  * 基本スコア：1000点/問題
  * 時間ボーナス：10秒以内(+200pt)、15秒以内(+100pt)、20秒以内(0pt)、30秒以内(-100pt)、30秒以上(-300pt)
  * 再生時間ボーナス：1秒(+500pt)、1.5秒(+300pt)、2秒(+100pt)、3秒(0pt)、5秒(-100pt)
  * 答え表示ペナルティ：-1000pt
* **ランク判定システム:**
  * SS: 16,000点以上（神の領域）
  * S: 14,500点以上（素晴らしい）
  * A: 12,500点以上（上級者）
  * B: 9,000点以上（良好）
  * C: 7,000点以上（普通）
  * D: 5,000点以上（要練習）
  * F: 5,000点未満（要改善）
* **楽曲名判定ロジック:**
  * 大文字小文字、全角半角、空白の統一を行う正規化処理
  * 正規化後の文字列による完全一致判定
* **高精度時間計測:**
  * performance.now() を使用した高精度な時間計測
  * 問題開始から回答までの経過時間を正確に測定
  * 問題ごとの経過時間表示（正解時・答え表示時に停止）
* **回答方式:**
  * テキスト入力：手入力による楽曲名入力
  * 選択式：モーダルからアルバム・楽曲を選択して回答

**4.3.6. ランキングシステム**
* **データベース管理:**
  * Prisma ORM + PostgreSQL によるランキングデータ管理
  * 上位100位までのランキング表示
  * 同スコアの場合は先着順で上位表示
* **ランキング登録:**
  * ユーザー名入力によるランキング登録
  * 重複登録防止機能（sessionStorage による制御）
  * ランキング登録は1結果につき1回のみ
* **詳細情報表示:**
  * 問題別スコア詳細の表示
  * 楽曲名、アルバム名、アーティスト名、回答時間、再生時間、答え表示有無を記録

**4.3.7. セッション管理**
* **sessionStorage による状態管理:**
  * チャレンジ結果の一時保存
  * ランキング登録状態の管理
  * 重複登録防止機能
* **開発環境サポート:**
  * MSW (Mock Service Worker) による開発時API モッキング
  * 本番環境では実際のデータベース API を使用

# 5. 非機能要件
| **項目** | **要件** |
|:-:|:-:|
| **ユーザビリティ (UI/UX)** | ・専門知識がなくても直感的に操作できる、シンプルで分かりやすい画面デザイン。<br>・スマートフォン、タブレット、PCなど、異なる画面サイズでも表示が崩れず、快適に操作できるレスポンシブデザインを採用する。<br>・モーダルウィンドウによる設定変更で、ユーザーの操作負荷を軽減する。 |
| **パフォーマンス** | ・画面遷移や楽曲データの読み込みが高速であり、ユーザーにストレスを与えないこと。<br>・特にクイズ画面での次問題への切り替えは1秒以内に完了することを目指す。<br>・YouTube Player APIの初期化を最適化し、再生遅延を最小限に抑制する。 |
| **セキュリティ** | ・YouTube IFrame Player APIのみを使用し、APIキーは不要。<br>・XSS攻撃を防ぐため、ユーザー入力の適切なサニタイズを実施。<br>・楽曲データは静的JSONファイルで管理し、セキュリティリスクを最小化。 |
| **運用・保守** | ・songs.json の更新（楽曲の追加・修正）が容易に行える構造であること。<br>・コードはリーダブルであり、他の開発者が容易にメンテナンスできること。<br>・TypeScriptによる型安全性を確保し、バグの発生を抑制。<br>・包括的なテストケースにより、機能の品質を保証。 |
| **テスト** | ・Jest + React Testing Libraryによる包括的なテストスイート。<br>・77個の最適化されたテストケースで機能の品質を保証。<br>・統合テストによりエンドツーエンドの動作を検証。<br>・チャレンジモード、ランキングシステム、選択式回答モードの専用テストケースを含む。 |

# 6. 技術的実装詳細
### 6.1. 状態管理
* **React useState** による局所的な状態管理を採用。
* **URLパラメータ** により画面間の状態連携を実現。
* **カスタムフック** (useYouTubePlayer) でYouTube Player APIの状態を管理。

### 6.2. コンポーネント設計
* **機能別コンポーネント分割:** QuizPlayer、ChallengeQuizPlayer、AlbumSelector、Modal等
* **型安全性:** TypeScriptによる厳密な型定義
* **再利用性:** 共通コンポーネントの積極的な活用
* **モード分離:** のんびりモードとチャレンジモードの独立したコンポーネント

### 6.3. ファイル構造
```
src/
├── app/                 # Next.js App Router
│   ├── api/             # API ルート
│   │   └── rankings/    # ランキング関連API
│   ├── challenge/       # チャレンジモード関連ページ
│   │   ├── page.tsx     # チャレンジモードページ
│   │   └── result/      # 結果表示ページ
│   ├── quiz/            # のんびりモードページ
│   └── ranking/         # ランキング画面
├── components/          # 共通コンポーネント
│   ├── ChallengeQuizPlayer.tsx  # チャレンジモード用プレイヤー
│   ├── QuizPlayer.tsx           # のんびりモード用プレイヤー
│   ├── Modal.tsx                # モーダルコンポーネント（HTML5 dialog対応）
│   ├── RankingDetailModal.tsx   # ランキング詳細モーダル
│   ├── SelectionAnswerModal.tsx # 選択式回答モーダル
│   └── MSWProvider.tsx          # MSW プロバイダー
├── hooks/              # カスタムフック
├── mocks/              # MSW関連ファイル
│   ├── handlers.ts     # APIハンドラー
│   ├── browser.ts      # ブラウザ用設定
│   └── node.ts         # Node.js用設定
├── types/              # TypeScript型定義
│   ├── index.ts        # 基本型定義
│   └── ranking.ts      # ランキング関連型定義
├── utils/              # ユーティリティ関数
│   ├── challenge.ts    # チャレンジモード関連ロジック
│   ├── quiz.ts         # 共通クイズロジック
│   ├── sessionStorage.ts # セッション管理
│   └── mockApi.ts      # 開発環境用モックAPI
└── __tests__/          # テストファイル
```

# 7. 用語集
| **用語** | **説明** |
|:-:|:-:|
| 中トロドン | 本アプリケーションの名称。楽曲の中盤を聴いて曲名を当てるクイズ形式。 |
| のんびりモード | 時間制限なしでじっくりと楽曲を聴いて楽しめるクイズモード。 |
| タイムアタック | 時間とスコアを競うチャレンジモード。10問で構成され、ランク判定を行う。 |
| チャレンジモード | タイムアタックモードの別称。スコアリングシステムとランク判定機能を持つ。 |
| 出題範囲 | クイズに出題される楽曲の集合。ユーザーがアルバム単位で選択する。 |
| セッション | ユーザーがトップ画面でゲームを開始してから、全問終了するか離脱するまでの一連のプレイ。 |
| デフォルト再生時間 | 各問題開始時の再生時間初期値。設定可能で、未設定時は前問題の設定を引き継ぐ。 |
| モーダルウィンドウ | 出題範囲・再生時間設定を行うオーバーレイ表示の設定画面。 |
| URLパラメータ | 画面間の状態連携に使用するクエリパラメータ（albums、defaultDuration、totalScore、scores）。 |
| スコアリングシステム | チャレンジモードで使用される点数計算システム。基本点、時間ボーナス、再生時間ボーナス、ペナルティから構成される。 |
| ランク判定 | チャレンジモードの最終スコアに基づいてSS/S/A/B/C/D/Fの7段階でプレイヤーの成績を評価するシステム。 |
| ランキングシステム | チャレンジモードのスコアをデータベースで管理し、上位100位までを表示するシステム。 |
| 選択式回答モード | テキスト入力に加えて、モーダルからアルバム・楽曲を選択して回答する機能。 |
| セッション管理 | sessionStorageを使用してユーザーのプレイ状況を管理し、重複登録を防止する機能。 |
| MSW | Mock Service Worker。開発環境でAPIをモックするツール。本番環境では実際のAPIを使用する。 |
| 時間計測最適化 | 問題ごとの経過時間を正確に測定し、正解時・答え表示時に停止する機能。 |